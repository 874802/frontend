---
import ProgressBar from "../components/ProgressBar.astro";
---

<nav class="navbar">
  <!-- Sección izquierda: Usuario -->
  <div class="user-section">
    <div class="user-icon-container">
      <img src="/images/icono_usuario.png" alt="User Icon" class="user-icon" />
      <span class="username">Guest</span>
    </div>

    <!-- Contenedor donde aparecerá botón o barra de progreso -->
    <div id="usuario-contenido"></div>

  </div>

  <!-- Logo central --> 
  <div class="logo-container">
    <!-- <img src="/images/logo_galaxy.png" alt="Galaxy IO Logo" class="logo-img" /> -->
  </div>

 <!-- Sección derecha: Iconos de navegación -->
 <div class="menu" id="menu-links">
  <a id="store-link">
    <img src="/images/icono_carrito.png" alt="Carrito" class="menu-icon" />
  </a>
  <a id="achievements-link">
    <img src="/images/icono_medalla.png" alt="Medalla" class="menu-icon" />
  </a>
  <a id="friends-link">
    <img src="/images/icono_amigos.png" alt="Usuarios" class="menu-icon" />
  </a>
  <a id="configuration-link">
    <img src="/images/configuration.png" alt="Configuration" class="menu-icon" />
  </a>
</div>
  
</nav>

<script>
  import { getCookie } from "../utils/cookies";

  document.addEventListener('DOMContentLoaded', () => {
    const contenido = document.getElementById('usuario-contenido');
    const accessToken = getCookie('accessToken');
    const isAuthenticated = !!accessToken;

    if (accessToken && contenido != null) {
      contenido.innerHTML = `<div><!-- Barra de progreso --></div>`;
    } else if (contenido != null){
      contenido.innerHTML = `
      <a href="/login" 
         style="
          background: linear-gradient(to right, #a855f7, #9333ea, #7e22ce);
          color: white;
          border: none;
          padding: 8px 14px;
          cursor: pointer;
          border-radius: 8px;
          font-size: 14px;
          box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.2);
          transition: all 0.3s ease;
          margin-top: -10px;
          text-decoration: none;">
         Regístrate
      </a>
    `;
  }

  // Modificar enlaces según autenticación
  const storeLink = document.getElementById('store-link');
  const achievementsLink = document.getElementById('achievements-link');
  const friendsLink = document.getElementById('friends-link');
  const configLink = document.getElementById('configuration-link');

  if (storeLink instanceof HTMLAnchorElement) storeLink.href = isAuthenticated ? "/store" : "/login";
  if (achievementsLink instanceof HTMLAnchorElement) achievementsLink.href = isAuthenticated ? "/achievements" : "/login";
  if (friendsLink instanceof HTMLAnchorElement) friendsLink.href = isAuthenticated ? "/friends" : "/login";
  if (configLink instanceof HTMLAnchorElement) configLink.href = isAuthenticated ? "/configuration" : "/login";
  });
</script>

<style>
/* Diseño principal de la navbar con Grid */
.navbar {
  display: grid;
  grid-template-columns: 1fr auto 1fr; /* Tres columnas: izquierda, centro y derecha */
  align-items: center;
  padding: 10px 15px;
  background: #282032; /* Azul oscuro */
  color: white;
  box-shadow: 0px 2px 10px rgba(0, 0, 0, 0.2);
}

/* Alinear la sección de usuario a la izquierda */
.user-section {
  display: flex;
  align-items: center;
  gap: 15px;
  justify-content: flex-start;
  margin-top: 5px;
}

/* Contenedor del icono y nombre del usuario */
.user-icon-container {
  display: flex;
  flex-direction: column;
  align-items: center;
}

.user-icon {
  width: 30px;
  height: 30px;
}

.username {
  font-weight: bold;
  font-size: 14px;
  margin-top: 5px;
}

/* Botón de registro con diseño de Tailwind */
.register-btn {
  background: linear-gradient(to right, #a855f7, #9333ea, #7e22ce);
  color: white;
  border: none;
  padding: 8px 14px;
  cursor: pointer;
  border-radius: 8px;
  font-size: 14px;
  box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.2);
  transition: all 0.3s ease;
  margin-top: -10px;
}

.register-btn:hover {
  background: linear-gradient(to left, #a855f7, #9333ea, #7e22ce);
}

/* Centrar el logo */
.logo-container {
  display: flex;
  justify-content: center;
  margin-top: 2px;
}

.logo-img {
  width: 70px;
  height: auto;
}

/* Menú de iconos a la derecha */
.menu {
  display: flex;
  align-items: center;
  gap: 20px;
  justify-content: flex-end;
}

.menu-icon {
  width: 30px;
  height: 30px;
  cursor: pointer;
  transition: opacity 0.3s ease;
  margin-top: -15px;
}

.menu-icon:hover {
  opacity: 0.8;
}
</style>





